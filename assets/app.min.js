$(function(){$("#origami").bind("tap",!1);var j=$.support.touch,r=j?"touchstart":"mousedown",s=j?"touchend":"mouseup",v={number:function(a){return a},hour:function(a){return a+"h"},hourMinute:function(a){var c=Math.floor(a),a=Math.floor(60*(a-c));a<10&&(a="0"+a);return c+"h"+a}},p={number:function(a){return function(c){a(parseFloat($.trim(this.value)),c.type==="blur")}},hourMinute:function(a){return function(c){var d=this.value.split("h"),h=parseFloat($.trim(d[0])),d=d[1]?parseFloat($.trim(d[1])):
0;a(h+d/60,c.type==="blur")}}},w={K:1,M:1E3},x=/^([0-9]+)(K|M)$/,y=$("#origami-result"),h=[],t;p.hour=p.hourMinute;$(".origami-count").each(function(a){function c(b,c){var d;isNaN(b)?b=i:(b/k>Math.floor(b/k)&&(b=(Math.floor(b/k)+1)*k),d=b>=0&&b<=q);if(c!==void 0||d){b<0?b=0:b>q&&(b=q);if(!t||b<=i)h[a]=(i=b)*o;c!==!1&&l.val(i?A(i):"-");for(var f=0,e=0,g=h.length;e<g;e++)f+=h[e];(t=f>=2E6)&&(f=2E6);f&&(f=f<1E3?"< 1 Mo":f>=1E6?(f/1E6).toFixed(2)+" Go":Math.ceil(f/1E3)+" Mo");y.text(f+" par mois")}return d}
function d(a){return function z(){c(i+a*k)?(m?(g/=2,g<80&&(g=80)):g=1E3,m=setTimeout(z,g)):j();return!1}}function j(){m&&(clearTimeout(m),m=g=void 0)}var l=$(this),e=l.data(),i=h[a]=0,k=1*e.origamiIncrement,q=1*e.origamiMax,o=x.exec(e.origamiBandwidth),A=v[e.origamiFormat],e=p[e.origamiFormat](c),n=l.siblings(".origami-control-panel"),u=$(".origami-plus",n),n=$(".origami-minus",n),m,g;l.bind("keyup blur",e);l.bind("focus",function(){$(this).val()==="-"&&$(this).val("")});o=o[1]*w[o[2]];u.bind(r,d(1));
n.bind(r,d(-1));u.add(n).bind(s,j).bind("vmouseout vmousecancel",function(){$(this).trigger(s)})})});