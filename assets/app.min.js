$(function(){$("#origami").bind("tap",!1);var i=$.support.touch,r=i?"touchstart":"mousedown",s=i?"touchend":"mouseup",u={number:function(a){return a},hour:function(a){return a+"h"},hourMinute:function(a){var c=Math.floor(a),a=Math.floor(60*(a-c));a<10&&(a="0"+a);return c+"h"+a}},o={number:function(a){return function(c){a(parseFloat($.trim(this.value)),c.type==="blur")}},hourMinute:function(a){return function(c){var d=this.value.split("h"),h=parseFloat($.trim(d[0])),d=d[1]?parseFloat($.trim(d[1])):
0;a(h+d/60,c.type==="blur")}}},v={K:1,M:1E3},w=/^([0-9]+)(K|M)$/,x=$("#origami-result"),h=[];o.hour=o.hourMinute;$(".origami-count").each(function(a){function c(b,c){var d;isNaN(b)?b=p:(b/j>Math.floor(b/j)&&(b=(Math.floor(b/j)+1)*j),d=b>=0&&b<=q);if(c!==void 0||d){b<0?b=0:b>q&&(b=q);h[a]=(p=b)*n;c!==!1&&k.val(b?z(b):"-");for(var f=0,e=0,g=h.length;e<g;e++)f+=h[e];f&&(f=f<1E3?"< 1 Mo":f>=1E6?(f/1E6).toFixed(2)+" Go":Math.ceil(f/1E3)+" Mo");x.text(f+" par mois")}return d}function d(a){return function y(){c(p+
a*j)?(l?(g/=2,g<80&&(g=80)):g=1E3,l=setTimeout(y,g)):i();return!1}}function i(){l&&(clearTimeout(l),l=g=void 0)}var k=$(this),e=k.data(),p=h[a]=0,j=1*e.origamiIncrement,q=1*e.origamiMax,n=w.exec(e.origamiBandwidth),z=u[e.origamiFormat],e=o[e.origamiFormat](c),m=k.siblings(".origami-control-panel"),t=$(".origami-plus",m),m=$(".origami-minus",m),l,g;k.bind("keyup blur",e);k.bind("focus",function(){$(this).val()==="-"&&$(this).val("")});n=n[1]*v[n[2]];t.bind(r,d(1));m.bind(r,d(-1));t.add(m).bind(s,i).bind("vmouseout vmousecancel",
function(){$(this).trigger(s)})})});